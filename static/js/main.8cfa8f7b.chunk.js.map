{"version":3,"sources":["utils/store.js","utils/utils.js","context/AppContext.js","components/MessageList.js","components/ConnectForm.js","components/widgets.js","components/SubscribeForm.js","components/PublishForm.js","components/HeaderActions.js","App.js","serviceWorker.js","index.js"],"names":["storeSet","key","obj","window","localStorage","setItem","JSON","stringify","storeGet","s","getItem","parse","undefined","saveMessages","host","messages","deleteMessages","removeItem","MySwal","withReactContent","Swal","toastInfo","title","message","timeout","fire","icon","text","toast","position","timer","toastError","React","createContext","isConnected","options","topics","Set","CreatedAt","ts","format","unix","NewBadge","index","Badge","pill","variant","MessageItem","item","length","ListGroup","Item","Media","Body","className","topic","props","useContext","AppContext","listItems","map","Fragment","ConnectButton","Button","type","ctx","AppContxt","useState","setOptions","handleChange","e","target","name","value","Object","assign","Form","onSubmit","preventDefault","fixedOptions","username","password","onConnectFormSubmit","Row","Group","as","Col","xs","md","lg","Control","disabled","onChange","placeholder","TopicInfo","onTopicClick","handleClick","textContent","tps","onClick","size","topicInput1","useRef","topicInput2","handleClick1","subscribe","current","console","log","onSubscribeFormSubmit","handleClick2","handleKeyUp","sm","onKeyUp","ref","topicInput","messageInput","callback","err","isValid","onPublishFormSubmit","Accordion","defaultActiveKey","Card","Toggle","Header","eventKey","Collapse","ConnectForm","SubscribeForm","PublishForm","MQTT_OPTIONS","App","onClearClick","setState","store","state","client","end","connect","theTopics","split","unsubscribe","includes","publish","needReconnect","this","showClearButton","Provider","Container","HeaderActions","MessageList","inTopics","prototype","toString","call","Symbol","iterator","isIterable","it","trim","filter","Boolean","cleanTopics","error","newTopics","forEach","el","delete","granted","opts","connected","now","moment","connectOpts","reconnectPeriod","mqtt","on","onConnected","stream","Math","round","Date","startsWith","checkConnect","Component","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"0gBAAaA,EAAW,SAACC,EAAKC,GAC5BC,OAAOC,aAAaC,QAAQ,mBAAqBJ,EAAKK,KAAKC,UAAUL,KAO1DM,EAAW,SAACP,GACvB,IAAIQ,EAAIN,OAAOC,aAAaM,QAAQ,mBAAqBT,GACzD,OAAOQ,EAAIH,KAAKK,MAAMF,QAAKG,GAOhBC,EAAe,SAACC,EAAMC,GACjCf,EAASc,EAAO,YAAaC,IAOlBC,EAAiB,SAACF,GAZJ,IAACb,IAada,EAAO,YAZnBX,OAAOC,aAAaa,WAAW,mBAAqBhB,I,2BCXhDiB,E,MAASC,GAAiBC,KAGnBC,EAAY,SAACC,EAAOC,EAASC,GACxCN,EAAOO,KAAK,CACVC,KAAM,UACNJ,MAAOA,EACPK,KAAMJ,EACNK,OAAO,EACPC,SAAU,MACVC,MAAON,GAAW,OAITO,EAAa,SAACT,EAAOC,EAASC,GACzCN,EAAOO,KAAK,CACVC,KAAM,QACNJ,MAAOA,EACPK,KAAMJ,EACNK,OAAO,EACPC,SAAU,MACVC,MAAON,GAAW,O,yCCtBPQ,MAAMC,cAAc,CACjCC,aAAa,EACbC,QAAS,GACTC,OAAQ,IAAIC,M,2CCERC,EAAY,SAAC,GAAY,IAAVC,EAAS,EAATA,GACnB,OACE,+BACE,kBAAC,IAAD,CAAQC,OAAO,sBAAsBC,MAAI,GACtCF,GACO,MAKVG,EAAW,SAACC,GAChB,OAAiB,IAAVA,EACL,kBAACC,EAAA,EAAD,CAAOC,MAAI,EAACC,QAAQ,UAApB,QAGE,MAGAC,EAAc,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,KAAML,EAAoB,EAApBA,MAAOM,EAAa,EAAbA,OAClC,OACE,kBAACC,EAAA,EAAUC,KAAX,KACE,kBAACC,EAAA,EAAD,KACE,kBAACA,EAAA,EAAMC,KAAP,KACE,4BAAQC,UAAU,gBAAgBN,EAAKO,MAAvC,MACA,0BAAMD,UAAU,kBAAkBN,EAAKzB,SACvC,2BAAO+B,UAAU,QAAjB,IAA0BL,EAASN,EAAnC,KACA,0BAAMW,UAAU,QACd,kBAAC,EAAD,CAAWf,GAAIS,EAAKT,MAEtB,0BAAMe,UAAU,QACd,kBAAC,EAAD,CAAUX,MAAOA,SAQd,WAACa,GAAW,IACjBzC,EAAa0C,qBAAWC,GAAxB3C,SACF4C,EAAY5C,EAAS6C,KAAI,SAACZ,EAAML,GAAP,OAC7B,kBAAC,IAAMkB,SAAP,CAAgB5D,IAAK,QAAU0C,GAC7B,kBAAC,EAAD,CAAaK,KAAMA,EAAML,MAAOA,EAAOM,OAAQlC,EAASkC,aAG5D,OAAO,kBAACC,EAAA,EAAD,CAAWJ,QAAQ,SAASa,I,wCC9C/BG,EAAgB,SAAC,GACrB,OADyC,EAAlB5B,YAErB,kBAAC6B,EAAA,EAAD,CAAQT,UAAU,YAAYR,QAAQ,SAASkB,KAAK,UAApD,cAIA,kBAACD,EAAA,EAAD,CAAQT,UAAU,YAAYR,QAAQ,UAAUkB,KAAK,UAArD,YAMW,WAACR,GACd,IAAMS,EAAMR,qBAAWS,GACfhC,EAAgB+B,EAAhB/B,YAFgB,EAGMiC,mBAASF,EAAI9B,SAHnB,mBAGjBA,EAHiB,KAGRiC,EAHQ,KAIlBC,EAAe,SAACC,GAAO,IAAD,EACFA,EAAEC,OAAlBC,EADkB,EAClBA,KAAMC,EADY,EACZA,MACdL,EAAWM,OAAOC,OAAO,GAAIxC,EAAlBuC,OAAA,IAAAA,CAAA,GAA8BF,EAAOC,MAelD,OACE,kBAACG,EAAA,EAAD,CAAMC,SAba,SAACP,GACpBA,EAAEQ,iBAEF,IAAMC,EAAe,CACnBjE,KAAMqB,EAAQrB,KACdkE,SAAU7C,EAAQ6C,UAAY,KAC9BC,SAAU9C,EAAQ8C,UAAY,MAGhCF,EAAajE,MAAQ0C,EAAM0B,qBAAuB1B,EAAM0B,oBAAoBH,KAK1E,kBAACH,EAAA,EAAKO,IAAN,KACE,kBAACP,EAAA,EAAKQ,MAAN,CAAYC,GAAIC,IAAKC,GAAI,GAAIC,GAAI,EAAGC,GAAI,GACtC,kBAACb,EAAA,EAAKc,QAAN,CACEC,SAAUzD,EACV0D,SAAUvB,EACVG,KAAK,OACLR,KAAK,OACLS,MAAOtC,EAAQrB,KACf+E,YAAY,kCAGhB,kBAACjB,EAAA,EAAKQ,MAAN,CAAYC,GAAIC,IAAKC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACrC,kBAACb,EAAA,EAAKc,QAAN,CACEC,SAAUzD,EACV0D,SAAUvB,EACVG,KAAK,WACLR,KAAK,OACLS,MAAOtC,EAAQ6C,SACfa,YAAY,cAGhB,kBAACjB,EAAA,EAAKQ,MAAN,CAAYC,GAAIC,IAAKC,GAAI,EAAGC,GAAI,EAAGC,GAAI,GACrC,kBAACb,EAAA,EAAKc,QAAN,CACEC,SAAUzD,EACV0D,SAAUvB,EACVG,KAAK,WACLR,KAAK,WACLS,MAAOtC,EAAQ8C,SACfY,YAAY,cAGhB,kBAACP,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,EAAGC,GAAI,GACtB,kBAAC,EAAD,CAAevD,YAAaA,Q,SCrEzB4D,EAAY,SAAC,GAA8B,IAA5B1D,EAA2B,EAA3BA,OAAQ2D,EAAmB,EAAnBA,aAC5BC,EAAc,SAAC1B,GACnByB,GAAgBA,EAAazB,EAAEC,OAAO0B,cAElCC,EAAM,YAAI9D,GAAQwB,KAAI,SAACjC,GAC3B,OACE,kBAAC,kBAAD,CAAiB1B,IAAK0B,EAAMA,KAAMA,GAChC,kBAACoC,EAAA,EAAD,CAAQoC,QAASH,EAAalD,QAAQ,kBAAkBQ,UAAU,OAAO8C,KAAK,MAC3EzE,OAKT,OACE,uBAAG2B,UAAU,WACX,sDACC4C,ICbQ,WAAC1C,GAAW,IAAD,EACQC,qBAAWS,GAAnChC,EADgB,EAChBA,YAAaE,EADG,EACHA,OACfiE,EAAcC,iBAAO,MACrBC,EAAcD,iBAAO,MAErBE,EAAe,SAAClC,GACpB,IAAMnC,EAAU,CACdsE,WAAW,EACXrE,OAAQiE,EAAYK,QAAQjC,OAE9BkC,QAAQC,IAAI,8BAA+BzE,GAC3CA,EAAQC,QAAUoB,EAAMqD,uBAAyBrD,EAAMqD,sBAAsB1E,GAC7EkE,EAAYK,QAAQjC,MAAQ,IAGxBqC,EAAe,SAACxC,GACpB,IAAMnC,EAAU,CACdsE,WAAW,EACXrE,OAAQmE,EAAYG,QAAQjC,OAE9BkC,QAAQC,IAAI,8BAA+BzE,GAC3CA,EAAQC,QAAUoB,EAAMqD,uBAAyBrD,EAAMqD,sBAAsB1E,GAC7EoE,EAAYG,QAAQjC,MAAQ,IAKxBsC,EAAc,SAACzC,GACL,UAAVA,EAAErE,MACJqE,EAAEQ,iBACER,EAAEC,SAAW8B,EAAYK,QAC3BF,IACSlC,EAAEC,SAAWgC,EAAYG,SAClCI,MAUN,OACE,kBAAC,IAAMjD,SAAP,KACE,kBAACe,EAAA,EAAD,KACE,kBAACA,EAAA,EAAKO,IAAN,CAAU7B,UAAU,sBAClB,kBAACgC,EAAA,EAAD,CAAKD,GAAIC,IAAK0B,GAAI,EAAGxB,GAAI,EAAGlC,UAAU,aACpC,kBAACsB,EAAA,EAAKc,QAAN,CACEuB,QAASF,EACTG,IAAKb,EACL7B,KAAK,mBACLR,KAAK,OACL6B,YAAY,gBAGhB,kBAACP,EAAA,EAAD,CAAK0B,GAAI,EAAGxB,GAAI,GACd,kBAACzB,EAAA,EAAD,CACET,UAAU,YACVkB,KAAK,YACL1B,QAAQ,UACRkB,KAAK,SACL2B,UAAWzD,EACXiE,QAASK,GANX,cAWF,kBAAClB,EAAA,EAAD,CAAK0B,GAAI,EAAGxB,GAAI,EAAGlC,UAAU,aAC3B,kBAACsB,EAAA,EAAKc,QAAN,CACEuB,QAASF,EACTG,IAAKX,EACL/B,KAAK,qBACLR,KAAK,OACL6B,YAAY,gBAGhB,kBAACP,EAAA,EAAD,CAAK0B,GAAI,EAAGxB,GAAI,GACd,kBAACzB,EAAA,EAAD,CACET,UAAU,YACVkB,KAAK,cACL1B,QAAQ,SACRkB,KAAK,SACL2B,UAAWzD,EACXiE,QAASW,GANX,iBAaN,kBAAC,EAAD,CAAW1E,OAAQA,EAAQ2D,aArDV,SAACxC,GACpBoD,QAAQC,IAAI,eAAgBrD,GAC5BgD,EAAYG,QAAQjC,MAAQlB,OCxCjB,WAACC,GAAW,IAAD,EACQC,qBAAWS,GAAnChC,EADgB,EAChBA,YAAaE,EADG,EACHA,OACf+E,EAAab,iBAAO,MACpBc,EAAed,iBAAO,MAyB5B,OACE,oCACE,kBAAC1B,EAAA,EAAD,CAAMC,SAzBW,SAACP,GACpBA,EAAEQ,iBACF,IAAM3C,EAAU,CACdoB,MAAO4D,EAAWT,QAAQjC,MAC1BlD,QAAS6F,EAAaV,QAAQjC,MAC9B4C,SAAU,SAACC,GACJA,IACHF,EAAaV,QAAQjC,MAAQ,KAGjC8C,QAAS,WACP,OAAOpF,EAAQoB,OAASpB,EAAQZ,UAIpCY,EAAQoF,WAAa/D,EAAMgE,qBAAuBhE,EAAMgE,oBAAoBrF,KAWxE,kBAACyC,EAAA,EAAKO,IAAN,KACE,kBAACP,EAAA,EAAKQ,MAAN,CAAYC,GAAIC,IAAKC,GAAI,GAAIC,GAAI,GAC/B,kBAACZ,EAAA,EAAKc,QAAN,CAAcwB,IAAKC,EAAY3C,KAAK,gBAAgBR,KAAK,OAAO6B,YAAY,gBAE9E,kBAACjB,EAAA,EAAKQ,MAAN,CAAYC,GAAIC,IAAKC,GAAI,GAAIC,GAAI,GAC/B,kBAACZ,EAAA,EAAKc,QAAN,CAAcwB,IAAKE,EAAc5C,KAAK,kBAAkBR,KAAK,OAAO6B,YAAY,qBAElF,kBAACP,EAAA,EAAD,CAAKC,GAAI,GAAIC,GAAI,GACf,kBAACzB,EAAA,EAAD,CAAQT,UAAU,YAAYkB,KAAK,UAAU1B,QAAQ,UAAUkB,KAAK,SAAS2B,UAAWzD,GAAxF,cAMN,kBAAC,EAAD,CAAWE,OAAQA,EAAQ2D,aAtBV,SAACxC,GACpBoD,QAAQC,IAAI,eAAgBrD,GAC5B4D,EAAWT,QAAQjC,MAAQlB,OCRhB,eAACC,GACd,OACE,kBAACiE,EAAA,EAAD,CAAWC,iBAAiB,IAAIpE,UAAU,SAExC,kBAACqE,EAAA,EAAD,KACE,kBAACF,EAAA,EAAUG,OAAX,CAAkBvC,GAAIsC,IAAKE,OAAQvE,UAAU,UAAUwE,SAAS,KAC9D,0BAAMxE,UAAU,cAAhB,qBAEF,kBAACmE,EAAA,EAAUM,SAAX,CAAoBD,SAAS,KAC3B,kBAACH,EAAA,EAAKtE,KAAN,KACE,kBAAC2E,EAAD,CAAa9C,oBAAqB1B,EAAM0B,yBAK9C,kBAACyC,EAAA,EAAD,KACE,kBAACF,EAAA,EAAUG,OAAX,CAAkBvC,GAAIsC,IAAKE,OAAQvE,UAAU,UAAUwE,SAAS,KAC9D,0BAAMxE,UAAU,cAAhB,uBAEF,kBAACmE,EAAA,EAAUM,SAAX,CAAoBD,SAAS,KAC3B,kBAACH,EAAA,EAAKtE,KAAN,KACE,kBAAC4E,EAAD,CAAepB,sBAAuBrD,EAAMqD,2BAKlD,kBAACc,EAAA,EAAD,KACE,kBAACF,EAAA,EAAUG,OAAX,CAAkBvC,GAAIsC,IAAKE,OAAQvE,UAAU,UAAUwE,SAAS,KAC9D,0BAAMxE,UAAU,cAAhB,qBAEF,kBAACmE,EAAA,EAAUM,SAAX,CAAoBD,SAAS,KAC3B,kBAACH,EAAA,EAAKtE,KAAN,KACE,kBAAC6E,EAAD,CAAaV,oBAAqBhE,EAAMgE,2B,8NC3CpD,IAAMW,GAAe,CACnBrH,KAAM,+BACNkE,SAAU,KACVC,SAAU,MAGSmD,G,YACnB,WAAY5E,GAAQ,IAAD,uBACjB,4CAAMA,KA+CR6E,aAAe,WACb,EAAKC,SAAS,CAAEvH,SAAU,KAAM,WAC9BwH,EAAqB,EAAKC,MAAMrG,QAAQrB,UAlDzB,EAsDnBoE,oBAAsB,SAAC/C,GACrBwE,QAAQC,IAAI,uBAAwBzE,GAChC,EAAKqG,MAAMtG,YACb,EAAKuG,OAAOC,MAERvG,GAAWA,EAAQrB,MACrB,EAAK6H,QAAQxG,IA5DA,EAoEnB0E,sBAAwB,SAAC1E,GACvBwE,QAAQC,IAAI,yBAA0BzE,GADH,IAE3BsE,EAAsBtE,EAAtBsE,UAAWrE,EAAWD,EAAXC,OACnB,GAAI,EAAKoG,MAAMtG,aAAeE,EAAQ,CACpC,IAAMwG,EAAYxG,EAAOyG,MAAM,KAC3BpC,EACF,EAAKA,UAAUmC,GAEf,EAAKE,YAAYF,KA5EJ,EAiFnBpB,oBAAsB,SAACrF,GACrBwE,QAAQC,IAAI,2BAA4BzE,GADP,IAEzBoB,EAAmBpB,EAAnBoB,MAAOhC,EAAYY,EAAZZ,QACXgC,EAAMwF,SAAS,MAAQxF,EAAMwF,SAAS,KACxChH,EAAW,iBAAkB,sCAG3B,EAAKyG,MAAMtG,aAAeqB,GAAShC,GACrC,EAAKyH,QAAQzF,EAAOhC,EAASY,EAAQkF,WAvFvC,IAAMlF,EAAUoG,EAAe,YAAcJ,GAF5B,OAGjB,EAAKK,MAAQ,CACXtG,aAAa,EACb+G,eAAe,EACf9G,QAASA,EACTC,OAAQ,IAAIC,IACZtB,SAAU,IARK,E,sEAYT,IACAA,EAAamI,KAAKV,MAAlBzH,SACFoI,EAAkBpI,GAAYA,EAASkC,OAAS,EACtD,OACE,kBAACS,EAAW0F,SAAZ,CAAqB3E,MAAOyE,KAAKV,OAC/B,kBAACa,EAAA,EAAD,KACE,kBAAClE,EAAA,EAAD,CAAK7B,UAAU,0BACb,wBAAIA,UAAU,MAAM+B,GAAIC,KAAxB,iBAIF,kBAACH,EAAA,EAAD,KACE,kBAACmE,EAAD,CACEpE,oBAAqBgE,KAAKhE,oBAC1B2B,sBAAuBqC,KAAKrC,sBAC5BW,oBAAqB0B,KAAK1B,uBAG9B,kBAACrC,EAAA,EAAD,CAAK7B,UAAU,OACb,wBAAI+B,GAAIC,KAAR,sBAEF,kBAACH,EAAA,EAAD,KACE,kBAACoE,EAAD,OAEF,kBAACpE,EAAA,EAAD,CAAK7B,UAAU,2BACZ6F,EACC,kBAACpF,EAAA,EAAD,CAAQsB,GAAIC,IAAKE,GAAI,EAAGC,GAAI,EAAGU,QAAS+C,KAAKb,aAAcvF,QAAQ,gBAAnE,kBAGE,U,kCAoDF0G,GACV,IAAIpH,ER9EyBlC,EQoF7B,ORpF6BA,EQ+EhBsJ,ER9EgC,oBAAxC9E,OAAO+E,UAAUC,SAASC,KAAKzJ,GQ+ElCkC,EAASoH,EAASX,MAAM,KRxFJ,SAAS3I,GAEjC,OAAW,MAAPA,GAGmC,oBAAzBA,EAAI0J,OAAOC,UQoFZC,CAAWN,KACpBpH,EAASoH,GAEJpH,EAAOwB,KAAI,SAACmG,GAAD,OAAQA,EAAGC,UAAQC,OAAOC,W,8BAGtC3G,EAAOhC,EAAS8F,GACtBV,QAAQC,IAAI,UAAWrD,EAAOhC,GAC9B2H,KAAKT,OAAOO,QAAQzF,EAAOhC,GAAS,SAAC+F,GAC9BA,EAIHX,QAAQC,IAAI,gBAAiBU,IAH7BX,QAAQC,IAAI,aAAcrD,EAAOhC,GACjCF,EAAU,eAAgB,sBAAwBkC,IAIpD8D,GAAYA,EAASC,Q,kCAIbkC,EAAUnC,GAAW,IAAD,OACxBjF,EAAS8G,KAAKiB,YAAYX,GAChC7C,QAAQC,IAAI,iBAAkBxE,GAC9B8G,KAAKT,OAAOK,YAAY1G,GAAQ,SAACkF,GAC/B,GAAKA,EAQHX,QAAQyD,MAAM,oBAAqB9C,OAR3B,CACRX,QAAQC,IAAI,kBAAmBxE,GAC/B,IAAMiI,EAAY,EAAK7B,MAAMpG,OAC7BA,EAAOkI,SAAQ,SAACC,GACdF,EAAUG,OAAOD,MAEnB,EAAKjC,SAAS,CAAElG,OAAQiI,IAI1BhD,GAAYA,EAASC,Q,gCAIfkC,EAAUnC,GAAW,IAAD,OACtBjF,EAAS8G,KAAKiB,YAAYX,GAChC7C,QAAQC,IAAI,eAAgBxE,GAC5B8G,KAAKT,OAAOhC,UAAUrE,EAAQ,MAAM,SAACkF,EAAKmD,GACnCnD,GAKHX,QAAQyD,MAAM,kBAAmB9C,GACjCvF,EAAW,mBAAoBuF,KAL/BX,QAAQC,IAAI,gBAAiB6D,GAC7B,EAAKnC,SAAS,CAAElG,OAAQ,IAAIC,IAAJ,sBAAYD,GAAZ,YAAuB,EAAKoG,MAAMpG,YAC1Df,EAAU,oBAAqB,sBAAwBe,IAKzDiF,GAAYA,EAASC,EAAKmD,Q,mCAK5BvB,KAAKV,MAAMtG,aACTgH,KAAKT,OAAOC,KAAI,WACd/B,QAAQC,IAAI,uB,kCAIN8D,GAAO,IT5JQ5J,ES4JT,OAChB6F,QAAQC,IAAI,eAAgB8D,GAC5BrJ,EAAU,kBAAmB,aAAeqJ,EAAK5J,MACjDyH,EAAe,UAAWmC,GAC1BxB,KAAKZ,SACH,CACEpG,YAAagH,KAAKT,OAAOkC,UACzBxI,QAASuI,EACT3J,UTpKqBD,ESoKQ4J,EAAK5J,KTnKjCN,EAASM,EAAO,cAAgB,MSqKnC,WACE,EAAK2F,UAAU,oBAAoB,SAACa,GAClC,IAAKA,EAAK,CACR,IAAMsD,EAAMC,MAASrI,OAAO,uBAC5B,EAAKiG,OAAOO,QAAQ,cAApB,4BAAwD4B,EAAxD,e,8BAOFF,GAAO,IAAD,OACNI,E,yVAAW,IAAQJ,EAAR,CAAcK,gBAAiB,IAChDpE,QAAQC,IAAI,kBAAmBkE,GAC/B5B,KAAKT,OAASuC,IAAKrC,QAAQ+B,EAAK5J,KAAMgK,GACtC5B,KAAKT,OAAOwC,GAAG,WAAW,WACxB,EAAKC,YAAYJ,MAEnB5B,KAAKT,OAAOwC,GAAG,cAAc,WAC3BtE,QAAQC,IAAI,cACZ,EAAK0B,SAAS,CAAEpG,YAAa,EAAKuG,OAAOkC,eAE3CzB,KAAKT,OAAOwC,GAAG,aAAa,WAC1BtE,QAAQC,IAAI,gBAEdsC,KAAKT,OAAOwC,GAAG,WAAW,WACxBtE,QAAQC,IAAI,cAEdsC,KAAKT,OAAOwC,GAAG,SAAS,WACtBtE,QAAQC,IAAI,SACZ,EAAK0B,SAAS,CAAEpG,YAAa,EAAKuG,OAAOkC,eAE3CzB,KAAKT,OAAOwC,GAAG,SAAS,SAAC3D,GACvBX,QAAQC,IAAI,QAAS,sBAAuBU,GAC5C,EAAKgB,SAAS,CAAEpG,YAAa,EAAKuG,OAAOkC,eAE3CzB,KAAKT,OAAO0C,OAAOF,GAAG,SAAS,SAAC3D,GAC9BX,QAAQyD,MAAM,oBAAqB9C,GACnCvF,EAAW,oBAAqB,wBAA0B+I,EAAYhK,SAExEoI,KAAKT,OAAOwC,GAAG,WAAW,SAAC1H,EAAOhC,GAEhC,EAAK+G,SACH,CACEvH,SAAS,CACP,CAAEwB,GAAI6I,KAAKC,MAAMC,KAAKV,MAAQ,KAAOrH,MAAOA,EAAOhC,QAASA,EAAQmI,aAD9D,mBAEH,EAAKlB,MAAMzH,aAGlB,WACEwH,EAAmB,EAAKC,MAAMrG,QAAQrB,KAAM,EAAK0H,MAAMzH,UACvD4F,QAAQC,IAAI,yBAA2B,EAAK4B,MAAMzH,SAASkC,gB,qCAOjE,IAAMd,EAAU+G,KAAKV,MAAMrG,QAC3BA,EAAQrB,MAAQqB,EAAQrB,KAAKyK,WAAW,OAASrC,KAAKP,QAAQxG,K,0CAI9DwE,QAAQC,IAAI,oBAAqBsC,KAAKV,MAAMrG,W,2CAIxC+G,KAAKV,MAAMS,eACbC,KAAKsC,iB,6CAKP7E,QAAQC,IAAI,wBACRsC,KAAKV,MAAMtG,aACbqG,EAAe,UAAWW,KAAKV,MAAMrG,SAEvCoG,EAAmBW,KAAKV,MAAMrG,QAAQrB,KAAMoI,KAAKV,MAAMzH,c,GArP1BiB,IAAMyJ,WCPnBvB,QACW,cAA7B/J,OAAOuL,SAASC,UAEe,UAA7BxL,OAAOuL,SAASC,UAEhBxL,OAAOuL,SAASC,SAASC,MACvB,2DCVNC,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SDyH3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.8cfa8f7b.chunk.js","sourcesContent":["export const storeSet = (key, obj) => {\n  window.localStorage.setItem(\"mqtt_store_item_\" + key, JSON.stringify(obj));\n};\n\nexport const storeClear = () => {\n  window.localStorage.clear();\n};\n\nexport const storeGet = (key) => {\n  let s = window.localStorage.getItem(\"mqtt_store_item_\" + key);\n  return s ? JSON.parse(s) : undefined;\n};\n\nexport const storeDelete = (key) => {\n  window.localStorage.removeItem(\"mqtt_store_item_\" + key);\n};\n\nexport const saveMessages = (host, messages) => {\n  storeSet(host + \"_messages\", messages);\n};\n\nexport const loadMessages = (host) => {\n  return storeGet(host + \"_messages\") || [];\n};\n\nexport const deleteMessages = (host) => {\n  storeDelete(host + \"_messages\");\n};\n","import Swal from \"sweetalert2\";\nimport withReactContent from \"sweetalert2-react-content\";\n\nconst MySwal = withReactContent(Swal);\n// https://www.npmjs.com/package/sweetalert2\n// eslint-disable-next-line no-unused-vars\nexport const toastInfo = (title, message, timeout) => {\n  MySwal.fire({\n    icon: \"success\",\n    title: title,\n    text: message,\n    toast: true,\n    position: \"top\",\n    timer: timeout || 3000\n  });\n};\n\nexport const toastError = (title, message, timeout) => {\n  MySwal.fire({\n    icon: \"error\",\n    title: title,\n    text: message,\n    toast: true,\n    position: \"top\",\n    timer: timeout || 5000\n  });\n};\n\nexport const isIterable = function(obj) {\n  // checks for null and undefined\n  if (obj == null) {\n    return false;\n  }\n  return typeof obj[Symbol.iterator] === \"function\";\n};\n\nexport const isString = function(obj) {\n  return Object.prototype.toString.call(obj) === \"[object String]\";\n};\n","import React from \"react\";\n\nexport default React.createContext({\n  isConnected: false,\n  options: {},\n  topics: new Set()\n});\n","import React, { useContext } from \"react\";\nimport Moment from \"react-moment\";\nimport ListGroup from \"react-bootstrap/ListGroup\";\nimport Media from \"react-bootstrap/Media\";\nimport Badge from \"react-bootstrap/Badge\";\nimport AppContext from \"../context/AppContext\";\n\nconst CreatedAt = ({ ts }) => {\n  return (\n    <small>\n      <Moment format=\"YYYY-MM-DD HH:mm:ss\" unix>\n        {ts}\n      </Moment>{\" \"}\n    </small>\n  );\n};\n\nconst NewBadge = (index) => {\n  return index === 0 ? (\n    <Badge pill variant=\"danger\">\n      New!\n    </Badge>\n  ) : null;\n};\n\nconst MessageItem = ({ item, index, length }) => {\n  return (\n    <ListGroup.Item>\n      <Media>\n        <Media.Body>\n          <strong className=\"text-primary\">{item.topic}: </strong>\n          <span className=\"text-secondary\">{item.message}</span>\n          <small className=\"pl-2\">({length - index})</small>\n          <span className=\"pl-2\">\n            <CreatedAt ts={item.ts} />\n          </span>\n          <span className=\"pl-2\">\n            <NewBadge index={index} />\n          </span>\n        </Media.Body>\n      </Media>\n    </ListGroup.Item>\n  );\n};\n\nexport default (props) => {\n  const { messages } = useContext(AppContext);\n  const listItems = messages.map((item, index) => (\n    <React.Fragment key={\"item_\" + index}>\n      <MessageItem item={item} index={index} length={messages.length} />\n    </React.Fragment>\n  ));\n  return <ListGroup variant=\"flush\">{listItems}</ListGroup>;\n};\n","import React, { useState, useContext } from \"react\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport AppContxt from \"../context/AppContext\";\n\nconst ConnectButton = ({ isConnected }) => {\n  return isConnected ? (\n    <Button className=\"btn-block\" variant=\"danger\" type=\"submit\">\n      Disconnect\n    </Button>\n  ) : (\n    <Button className=\"btn-block\" variant=\"primary\" type=\"submit\">\n      Connect\n    </Button>\n  );\n};\n\nexport default (props) => {\n  const ctx = useContext(AppContxt);\n  const { isConnected } = ctx;\n  const [options, setOptions] = useState(ctx.options);\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setOptions(Object.assign({}, options, { [name]: value }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    // empty username not equal to no username\n    const fixedOptions = {\n      host: options.host,\n      username: options.username || null,\n      password: options.password || null\n    };\n    // console.log(\"ConnectForm.handleSubmit \", fixedOptions);\n    fixedOptions.host && props.onConnectFormSubmit && props.onConnectFormSubmit(fixedOptions);\n  };\n\n  return (\n    <Form onSubmit={handleSubmit}>\n      <Form.Row>\n        <Form.Group as={Col} xs={12} md={4} lg={4}>\n          <Form.Control\n            disabled={isConnected}\n            onChange={handleChange}\n            name=\"host\"\n            type=\"text\"\n            value={options.host}\n            placeholder=\"ws://test.mosquitto.org:8080\"\n          />\n        </Form.Group>\n        <Form.Group as={Col} xs={6} md={3} lg={3}>\n          <Form.Control\n            disabled={isConnected}\n            onChange={handleChange}\n            name=\"username\"\n            type=\"text\"\n            value={options.username}\n            placeholder=\"Username\"\n          />\n        </Form.Group>\n        <Form.Group as={Col} xs={6} md={2} lg={3}>\n          <Form.Control\n            disabled={isConnected}\n            onChange={handleChange}\n            name=\"password\"\n            type=\"password\"\n            value={options.password}\n            placeholder=\"Password\"\n          />\n        </Form.Group>\n        <Col xs={12} md={3} lg={2}>\n          <ConnectButton isConnected={isConnected} />\n        </Col>\n      </Form.Row>\n    </Form>\n  );\n};\n","import React from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\n\nexport const TopicInfo = ({ topics, onTopicClick }) => {\n  const handleClick = (e) => {\n    onTopicClick && onTopicClick(e.target.textContent);\n  };\n  const tps = [...topics].map((text) => {\n    return (\n      <CopyToClipboard key={text} text={text}>\n        <Button onClick={handleClick} variant=\"outline-success\" className=\"mr-2\" size=\"sm\">\n          {text}\n        </Button>\n      </CopyToClipboard>\n    );\n  });\n  return (\n    <p className=\"m-0 p-0\">\n      <strong>Subscribed Topics:</strong>\n      {tps}\n    </p>\n  );\n};\n\nexport const SimpleInfo = ({ name, value }) => {\n  return (\n    <p className=\"m-0 p-0\">\n      <strong>{name}</strong>\n      <span className=\"text-success\">{value}</span>\n    </p>\n  );\n};","import React, { useRef, useContext } from \"react\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport AppContxt from \"../context/AppContext\";\nimport { TopicInfo } from \"./widgets\";\n\nexport default (props) => {\n  const { isConnected, topics } = useContext(AppContxt);\n  const topicInput1 = useRef(null);\n  const topicInput2 = useRef(null);\n\n  const handleClick1 = (e) => {\n    const options = {\n      subscribe: true,\n      topics: topicInput1.current.value\n    };\n    console.log(\"SubscribeForm.handleClick1 \", options);\n    options.topics && props.onSubscribeFormSubmit && props.onSubscribeFormSubmit(options);\n    topicInput1.current.value = \"\";\n  };\n\n  const handleClick2 = (e) => {\n    const options = {\n      subscribe: false,\n      topics: topicInput2.current.value\n    };\n    console.log(\"SubscribeForm.handleClick2 \", options);\n    options.topics && props.onSubscribeFormSubmit && props.onSubscribeFormSubmit(options);\n    topicInput2.current.value = \"\";\n  };\n\n  // Pressing the enter key triggers the click handler of the first type=\"submit\" button\n  // https://dzello.com/blog/2017/02/19/demystifying-enter-key-submission-for-react-forms/\n  const handleKeyUp = (e) => {\n    if (e.key === \"Enter\") {\n      e.preventDefault();\n      if (e.target === topicInput1.current) {\n        handleClick1(null);\n      } else if (e.target === topicInput2.current) {\n        handleClick2(null);\n      }\n    }\n  };\n\n  const onTopicClick = (topic) => {\n    console.log(\"onTopicClick\", topic);\n    topicInput2.current.value = topic;\n  };\n\n  return (\n    <React.Fragment>\n      <Form>\n        <Form.Row className=\"align-items-center\">\n          <Col as={Col} sm={6} md={3} className=\"mb-3 mt-3\">\n            <Form.Control\n              onKeyUp={handleKeyUp}\n              ref={topicInput1}\n              name=\"subscribe-topics\"\n              type=\"text\"\n              placeholder=\"topic/test\"\n            />\n          </Col>\n          <Col sm={6} md={3}>\n            <Button\n              className=\"btn-block\"\n              name=\"subscribe\"\n              variant=\"primary\"\n              type=\"button\"\n              disabled={!isConnected}\n              onClick={handleClick1}\n            >\n              Subscribe\n            </Button>\n          </Col>\n          <Col sm={6} md={3} className=\"mb-3 mt-3\">\n            <Form.Control\n              onKeyUp={handleKeyUp}\n              ref={topicInput2}\n              name=\"unsubscribe-topics\"\n              type=\"text\"\n              placeholder=\"topic/test\"\n            />\n          </Col>\n          <Col sm={6} md={3}>\n            <Button\n              className=\"btn-block\"\n              name=\"unsubscribe\"\n              variant=\"danger\"\n              type=\"button\"\n              disabled={!isConnected}\n              onClick={handleClick2}\n            >\n              Unsubscibe\n            </Button>\n          </Col>\n        </Form.Row>\n      </Form>\n      <TopicInfo topics={topics} onTopicClick={onTopicClick} />\n    </React.Fragment>\n  );\n};\n","import React, { useRef, useContext } from \"react\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport Form from \"react-bootstrap/Form\";\nimport AppContxt from \"../context/AppContext\";\nimport { TopicInfo } from \"./widgets\";\n\nexport default (props) => {\n  const { isConnected, topics } = useContext(AppContxt);\n  const topicInput = useRef(null);\n  const messageInput = useRef(null);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const options = {\n      topic: topicInput.current.value,\n      message: messageInput.current.value,\n      callback: (err) => {\n        if (!err) {\n          messageInput.current.value = \"\";\n        }\n      },\n      isValid: () => {\n        return options.topic && options.message;\n      }\n    };\n    // console.log(\"PublishForm.handleSubmit \", options);\n    options.isValid() && props.onPublishFormSubmit && props.onPublishFormSubmit(options);\n  };\n\n  const onTopicClick = (topic) => {\n    console.log(\"onTopicClick\", topic);\n    topicInput.current.value = topic;\n  };\n\n  return (\n    <>\n      <Form onSubmit={handleSubmit}>\n        <Form.Row>\n          <Form.Group as={Col} xs={12} md={3}>\n            <Form.Control ref={topicInput} name=\"publish-topic\" type=\"text\" placeholder=\"topic name\" />\n          </Form.Group>\n          <Form.Group as={Col} xs={12} md={7}>\n            <Form.Control ref={messageInput} name=\"publish-message\" type=\"text\" placeholder=\"message content\" />\n          </Form.Group>\n          <Col xs={12} md={2}>\n            <Button className=\"btn-block\" name=\"publish\" variant=\"primary\" type=\"submit\" disabled={!isConnected}>\n              Publish\n            </Button>\n          </Col>\n        </Form.Row>\n      </Form>\n      <TopicInfo topics={topics} onTopicClick={onTopicClick} />\n    </>\n  );\n};\n\n// https://zacjones.io/handle-multiple-inputs-in-react-with-hooks\n// first approach, useState\n// need: onChange= ()=>{setServer}\n// use: user\n//   const [server, setServer] = useState(\"\");\n//   const [user, setUser] = useState(\"\");\n//   const [pass, setPass] = useState(\"\");\n// second approach, useRef\n// need: ref={serverInput}\n// use: serverInput.current.value\n//   const serverInput = useRef(null);\n//   const userInput = useRef(null);\n//   const passInput = useRef(null);\n// third approach\n// use callback function\n// need: onFormChange\n// use: onFormChnage(e){ e.target.name, e.target.value }\n// fourth approach\n// use useReducer\n// fix https://stackoverflow.com/questions/47012169/\n//   let extraOpts = props.isConnected ? { disabled: \"disabled\" } : {};\n","import React from \"react\";\nimport Card from \"react-bootstrap/Card\";\nimport Accordion from \"react-bootstrap/Accordion\";\nimport ConnectForm from \"./ConnectForm\";\nimport SubscribeForm from \"./SubscribeForm\";\nimport PublishForm from \"./PublishForm\";\n\n// onFormSubmit={this.onFormSubmit}\n// isConnected={this.state.isConnected}\n// options={this.state.options}\n// eslint-disable-next-line\nfunction FormCard(props) {\n  return (\n    <Card>\n      <Accordion.Toggle as={Card.Header} className=\"bg-dark\" eventKey={props.index}>\n        <span className=\"text-white\">{props.title}</span>\n      </Accordion.Toggle>\n      <Accordion.Collapse eventKey={props.index}>\n        <Card.Body>{props.children}</Card.Body>\n      </Accordion.Collapse>\n    </Card>\n  );\n}\n\nexport default (props) => {\n  return (\n    <Accordion defaultActiveKey=\"0\" className=\"w-100\">\n      {/* Connect Form Card */}\n      <Card>\n        <Accordion.Toggle as={Card.Header} className=\"bg-dark\" eventKey=\"0\">\n          <span className=\"text-white\"> Connect Options</span>\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"0\">\n          <Card.Body>\n            <ConnectForm onConnectFormSubmit={props.onConnectFormSubmit} />\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n      {/* Subscribe Form Card */}\n      <Card>\n        <Accordion.Toggle as={Card.Header} className=\"bg-dark\" eventKey=\"1\">\n          <span className=\"text-white\"> Subscribe Options</span>\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"1\">\n          <Card.Body>\n            <SubscribeForm onSubscribeFormSubmit={props.onSubscribeFormSubmit} />\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n      {/* Publish Form Card */}\n      <Card>\n        <Accordion.Toggle as={Card.Header} className=\"bg-dark\" eventKey=\"2\">\n          <span className=\"text-white\"> Publish Options</span>\n        </Accordion.Toggle>\n        <Accordion.Collapse eventKey=\"2\">\n          <Card.Body>\n            <PublishForm onPublishFormSubmit={props.onPublishFormSubmit} />\n          </Card.Body>\n        </Accordion.Collapse>\n      </Card>\n    </Accordion>\n  );\n};\n","import React from \"react\";\nimport mqtt from \"mqtt\";\nimport * as store from \"./utils/store\";\nimport { isIterable, isString, toastInfo, toastError } from \"./utils/utils\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport moment from \"moment\";\nimport AppContext from \"./context/AppContext\";\nimport MessageList from \"./components/MessageList\";\nimport HeaderActions from \"./components/HeaderActions\";\nimport Button from \"react-bootstrap/Button\";\n\nconst MQTT_OPTIONS = {\n  host: \"ws://test.mosquitto.org:8080\",\n  username: null,\n  password: null\n};\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    const options = store.storeGet(\"options\") || MQTT_OPTIONS;\n    this.state = {\n      isConnected: false,\n      needReconnect: false,\n      options: options,\n      topics: new Set(),\n      messages: []\n    };\n  }\n\n  render() {\n    const { messages } = this.state;\n    const showClearButton = messages && messages.length > 0;\n    return (\n      <AppContext.Provider value={this.state}>\n        <Container>\n          <Row className=\"justify-content-center\">\n            <h1 className=\"p-3\" as={Col}>\n              MQTT Monitor\n            </h1>\n          </Row>\n          <Row>\n            <HeaderActions\n              onConnectFormSubmit={this.onConnectFormSubmit}\n              onSubscribeFormSubmit={this.onSubscribeFormSubmit}\n              onPublishFormSubmit={this.onPublishFormSubmit}\n            />\n          </Row>\n          <Row className=\"m-3\">\n            <h3 as={Col}>Received Messages</h3>\n          </Row>\n          <Row>\n            <MessageList />\n          </Row>\n          <Row className=\"justify-content-end p-3\">\n            {showClearButton ? (\n              <Button as={Col} md={3} lg={2} onClick={this.onClearClick} variant=\"outline-dark\">\n                Clear Messages\n              </Button>\n            ) : null}\n          </Row>\n        </Container>\n      </AppContext.Provider>\n    );\n  }\n\n  onClearClick = () => {\n    this.setState({ messages: [] }, () => {\n      store.deleteMessages(this.state.options.host);\n    });\n  };\n\n  onConnectFormSubmit = (options) => {\n    console.log(\"onConnectFormSubmit \", options);\n    if (this.state.isConnected) {\n      this.client.end();\n    } else {\n      if (options && options.host) {\n        this.connect(options);\n        // this.setState({ options: options }, () => {\n        //   this.checkConnect();\n        // });\n      }\n    }\n  };\n\n  onSubscribeFormSubmit = (options) => {\n    console.log(\"onSubscribeFormSubmit \", options);\n    const { subscribe, topics } = options;\n    if (this.state.isConnected && topics) {\n      const theTopics = topics.split(\" \");\n      if (subscribe) {\n        this.subscribe(theTopics);\n      } else {\n        this.unsubscribe(theTopics);\n      }\n    }\n  };\n\n  onPublishFormSubmit = (options) => {\n    console.log(\"onPublishFormFormSubmit \", options);\n    const { topic, message } = options;\n    if (topic.includes(\"#\") || topic.includes(\"*\")) {\n      toastError(\"Invalid Topics\", \"Can not publish to wildcard topics\");\n      return;\n    }\n    if (this.state.isConnected && topic && message) {\n      this.publish(topic, message, options.callback);\n    }\n  };\n\n  cleanTopics(inTopics) {\n    let topics;\n    if (isString(inTopics)) {\n      topics = inTopics.split(\" \");\n    } else if (isIterable(inTopics)) {\n      topics = inTopics;\n    }\n    return topics.map((it) => it.trim()).filter(Boolean);\n  }\n\n  publish(topic, message, callback) {\n    console.log(\"publish\", topic, message);\n    this.client.publish(topic, message, (err) => {\n      if (!err) {\n        console.log(\"published:\", topic, message);\n        toastInfo(\"Message Sent\", \"message is sent to \" + topic);\n      } else {\n        console.log(\"publish fail:\", err);\n      }\n      callback && callback(err);\n    });\n  }\n\n  unsubscribe(inTopics, callback) {\n    const topics = this.cleanTopics(inTopics);\n    console.log(\"unsubscribe to\", topics);\n    this.client.unsubscribe(topics, (err) => {\n      if (!err) {\n        console.log(\"unsubscribed to\", topics);\n        const newTopics = this.state.topics;\n        topics.forEach((el) => {\n          newTopics.delete(el);\n        });\n        this.setState({ topics: newTopics });\n      } else {\n        console.error(\"unsubscribe fail:\", err);\n      }\n      callback && callback(err);\n    });\n  }\n\n  subscribe(inTopics, callback) {\n    const topics = this.cleanTopics(inTopics);\n    console.log(\"subscribe to\", topics);\n    this.client.subscribe(topics, null, (err, granted) => {\n      if (!err) {\n        console.log(\"subscribed to\", granted);\n        this.setState({ topics: new Set([...topics, ...this.state.topics]) });\n        toastInfo(\"Subscribe Success\", \"subscribed topics: \" + topics);\n      } else {\n        console.error(\"subscribe fail:\", err);\n        toastError(\"Subscribe Failed\", err);\n      }\n      callback && callback(err, granted);\n    });\n  }\n\n  disconnect() {\n    this.state.isConnected &&\n      this.client.end(() => {\n        console.log(\"disconnect end\");\n      });\n  }\n\n  onConnected(opts) {\n    console.log(\"connected to\", opts);\n    toastInfo(\"MQTT Connected!\", \"server is \" + opts.host);\n    store.storeSet(\"options\", opts);\n    this.setState(\n      {\n        isConnected: this.client.connected,\n        options: opts,\n        messages: store.loadMessages(opts.host)\n      },\n      () => {\n        this.subscribe(\"pump/# monitor/#\", (err) => {\n          if (!err) {\n            const now = moment().format(\"YYYY-MM-DD HH:mm:ss\");\n            this.client.publish(\"monitor/log\", `Monitor online at ${now}!`);\n          }\n        });\n      }\n    );\n  }\n\n  connect(opts) {\n    const connectOpts = { ...opts, reconnectPeriod: 0 };\n    console.log(\"connecting with\", connectOpts);\n    this.client = mqtt.connect(opts.host, connectOpts);\n    this.client.on(\"connect\", () => {\n      this.onConnected(connectOpts);\n    });\n    this.client.on(\"disconnect\", () => {\n      console.log(\"disconnect\");\n      this.setState({ isConnected: this.client.connected });\n    });\n    this.client.on(\"reconnect\", () => {\n      console.log(\"reconnect\");\n    });\n    this.client.on(\"offline\", () => {\n      console.log(\"offline\");\n    });\n    this.client.on(\"close\", () => {\n      console.log(\"close\");\n      this.setState({ isConnected: this.client.connected });\n    });\n    this.client.on(\"error\", (err) => {\n      console.log(\"Ooops\", \"Something is wrong!\", err);\n      this.setState({ isConnected: this.client.connected });\n    });\n    this.client.stream.on(\"error\", (err) => {\n      console.error(\"Connection error:\", err);\n      toastError(\"Connection Error!\", \"Failed to connect to \" + connectOpts.host);\n    });\n    this.client.on(\"message\", (topic, message) => {\n      //   toastInfo(\"New Message\", message.toString() + \" (\" + topic + \")\");\n      this.setState(\n        {\n          messages: [\n            { ts: Math.round(Date.now() / 1000), topic: topic, message: message.toString() },\n            ...this.state.messages\n          ]\n        },\n        () => {\n          store.saveMessages(this.state.options.host, this.state.messages);\n          console.log(\"total messages count: \" + this.state.messages.length);\n        }\n      );\n    });\n  }\n\n  checkConnect() {\n    const options = this.state.options;\n    options.host && options.host.startsWith(\"ws\") && this.connect(options);\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount\", this.state.options);\n  }\n\n  componentDidUpdate() {\n    if (this.state.needReconnect) {\n      this.checkConnect();\n    }\n  }\n\n  componentWillUnmount() {\n    console.log(\"componentWillUnmount\");\n    if (this.state.isConnected) {\n      store.storeSet(\"options\", this.state.options);\n    }\n    store.saveMessages(this.state.options.host, this.state.messages);\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport '@sweetalert2/theme-bootstrap-4/bootstrap-4.css';\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}